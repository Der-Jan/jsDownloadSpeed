<html>
<head>
<title>Jans Download Test</title>
<script>
	var startTime,loadedImages,toLoad;
	var imgSize = 2990713;
        function addImg(e){
		startTime=new Date();
		loadedImages=0;
		toLoad=24;
		for (i=0;i<toLoad;i++) {
		img = new XMLHttpRequest();
		img.addEventListener("load", function(e) {
			if (this.status == 200) {
				loadedImages++;
				document.getElementById("result").innerHTML += ".";
				if ( loadedImages % 6 == 0)
				document.getElementById("result").innerHTML += " Took " + ( e.timeStamp - startTime.getTime() )/1000 + "s for " + Math.round(10*imgSize*loadedImages/1024/1024)/10 + "MB - rate is " + Math.round(80000*imgSize*loadedImages/1024/1024/( e.timeStamp - startTime.getTime() ))/10 + "MBit/s<br/>" ;
				this.blob = null;
			}
		}, true);
		img.addEventListener("error", function(e) {
		//	document.getElementById("result").innerHTML += "Error: " + e;
		});
		img.open("GET", "passbild.jpg?"+i+Math.random(), true);
		img.responseType = "blob";
		img.send();
		}
	};
</script>
</head>
<body onload="addImg()">
<h1>Jans Download Test</h1>
<div id='result'>
</div>
<div id='hiddenimg' style="display:none">
</div>
</body>
</html>
